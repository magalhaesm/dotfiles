#!/usr/bin/env bash

URL="https://github.com/sharkdp/fd/releases"
RELEASES="$URL/latest"
DOWNLOAD="$URL/download"

pushd "$(mktemp -d)" &>/dev/null || exit 1
LATEST=$(curl -s $RELEASES | cut -d'"' -f2)
VERSION=$(echo "$LATEST" | awk -F "v" '{ print $NF }' | cut -d'"' -f1)

ARCH="_amd64"
DEB_AMD64="fd_$VERSION$ARCH.deb"

curl -L "$DOWNLOAD/v$VERSION/$DEB_AMD64" -o "$DEB_AMD64"
sudo dpkg -i "$DEB_AMD64"
popd &>/dev/null || exit 1
