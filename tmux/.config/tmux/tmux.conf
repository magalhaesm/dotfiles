#
# ████████╗███╗   ███╗██╗   ██╗██╗  ██╗
# ╚══██╔══╝████╗ ████║██║   ██║╚██╗██╔╝
#    ██║   ██╔████╔██║██║   ██║ ╚███╔╝
#    ██║   ██║╚██╔╝██║██║   ██║ ██╔██╗
#    ██║   ██║ ╚═╝ ██║╚██████╔╝██╔╝ ██╗
#    ╚═╝   ╚═╝     ╚═╝ ╚═════╝ ╚═╝  ╚═╝

# -- Geral --------------------------------------------------------------------

# utf8
set -q -g status-utf8 on
set-window-option -q -g utf8 on

set-option -g focus-events on

set -g mouse off           # Suporte ao mouse
setw -g mode-keys vi

unbind C-b
set -g prefix C-f          # Prefixo Ctrl-f

set -s escape-time 1  # Configura tempo de espera entre prefixo e comando

set -g base-index 1                      # Numera janela à partir de 1
set-window-option -g pane-base-index 1   # Numera painéis à partir de 1

set -g renumber-windows on   # renumera janela ao fechar

set -g history-limit 10000   # aumenta o tamanho do buffer de rolagem

set -g display-time 3000     # mensagens são mostradas por 3 segundos

set-option -g allow-rename off   # não renomeia janelas automaticamente

# -- Atalhos ------------------------------------------------------------------

# Recarrega configurações
bind r source-file ~/.config/tmux/tmux.conf \; display " Recarregado!"

# Divide painéis
bind -n M-v split-window -c "#{pane_current_path}"
bind -n M-s split-window -h -c "#{pane_current_path}"
bind -n M-X kill-pane

# Navegar entre painéis com Prefixo h, j, k, e l
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Redimensiona janelas
bind -r H resize-pane -L
bind -r J resize-pane -D
bind -r K resize-pane -U
bind -r L resize-pane -R

# Seleção rápida de janelas
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Navegação páginas
bind -r -T copy-mode C-k send-keys -X page-up
bind -r -T copy-mode C-j send-keys -X page-down

# Modo Cópia
bind y copy-mode
bind -T copy-mode-vi 'v' send-keys -X begin-selection
bind -T copy-mode-vi 'y' send-keys -X copy-selection
bind P paste-buffer

# Tmux cheat.sh
bind-key -r i run-shell "tmux neww -n info ~/.config/tmux/cht/cheat.sh"

# -- Visual --------------------------------------------------------------------

base00=default
base01='#3b4252'
base02='#434c5e'
base03='#abb2bf'
base04='#d8dee9'
base05='#e5e9f0'
base06='#eceff4'
base07='#56b6c2'
base08='#88c0d0'
base09='#8be9fd'
base0A='#5e81ac'
base0B='#ff5555'
base0C='#f1fa8c'
base0D='#ffb86c'
base0E='#50fa7b'
base0F='#c678dd'

# Suporte a cores
set -g default-terminal "tmux-256color"

# Relógio
set-window-option -g clock-mode-colour $base08

# Bordas dos painéis
set-window-option -g pane-border-style fg=$base02
set-window-option -g pane-active-border-style fg=$base09

# Números dos painéis
set-option -g display-panes-active-colour $base08
set-option -g display-panes-colour $base01

# Título da janela ativa
set-window-option -g window-status-current-style fg=$base0D,bg=$base00
set-window-option -g window-status-current-format " #[bold]#W"

# -- Barra de estado ----------------------------------------------------------

# Estilo geral
set -g status-interval 60
set -g status-left-length 30
set -g status-right-length 150
set -g status-style fg=$base03,bg=$base00

# Mensagem de texto
set-option -g message-style bg=$base00,fg=$base0C

# Painel esquerdo
tm_session_name="#[default,bg=$base00,fg=$base0F] 🚀 #S "

set -g status-left "$tm_session_name"

# Lista de janelas
set-window-option -g window-status-style fg=$base03,bg=$base00

# Estilo da lista de janelas
set-window-option -g window-status-style fg=$base03,bg=$base00
set-window-option -g window-status-format " #I #W"

# Painel direito
tm_prefix=" #[default,bg=$base00,fg=$base04] #{?client_prefix,,}"
tm_pane="#[default,bg=$base00, fg=$base0F]  #P"
tm_upTime="#[default,fg=$base09,bg=$base00]  #($HOME/.config/tmux/scripts/uptime)"
tm_zoom="#[default,bg=$base00,fg=$base0D] #{?window_zoomed_flag,,#[bg=$base00,fg=$base0E]}"
tm_copy="#[default,bg=$base00,fg=$base0D] #{?pane_in_mode, ,#[bg=$base00,fg=$base03] }"

set -g status-right "$tm_prefix $tm_pane $tm_upTime $tm_zoom $tm_copy"
