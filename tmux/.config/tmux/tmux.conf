#
# ████████╗███╗   ███╗██╗   ██╗██╗  ██╗
# ╚══██╔══╝████╗ ████║██║   ██║╚██╗██╔╝
#    ██║   ██╔████╔██║██║   ██║ ╚███╔╝
#    ██║   ██║╚██╔╝██║██║   ██║ ██╔██╗
#    ██║   ██║ ╚═╝ ██║╚██████╔╝██╔╝ ██╗
#    ╚═╝   ╚═╝     ╚═╝ ╚═════╝ ╚═╝  ╚═╝

# -- Geral --------------------------------------------------------------------

# utf8
set -q -g status-utf8 on
set-window-option -q -g utf8 on

set-option -g focus-events on

set -g mouse off           # Suporte ao mouse
setw -g mode-keys vi

unbind C-b                 # Libera prefixo original C-b
set -g prefix C-f          # Altera prefixo de C-b para C-a

set -s escape-time 1  # Configura tempo de espera entre prefixo e comando

set -g base-index 1                      # Numera janela à partir de 1
set-window-option -g pane-base-index 1   # Numera painéis à partir de 1

set -g renumber-windows on   # renumera janela ao fechar

set -g history-limit 10000   # aumenta o tamanho do buffer de rolagem

set -g display-time 3000     # mensagens são mostradas por 3 segundos

set-option -g allow-rename off   # não renomeia janelas automaticamente

# -- Atalhos ------------------------------------------------------------------

# Recarrega configurações
bind r source-file ~/.config/tmux/tmux.conf \; display " Recarregado!"

# Divide painéis
bind -n M-s split-window -c "#{pane_current_path}"
bind -n M-v split-window -h -c "#{pane_current_path}"
bind -n M-X kill-pane

# Move entre painéis com Prefixo h, j, k, e l
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Redimensiona janelas
bind -r H resize-pane -L
bind -r J resize-pane -D
bind -r K resize-pane -U
bind -r L resize-pane -R

# Seleção rápida de janelas
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Navegação páginas
bind -r -T copy-mode C-k send-keys -X page-up
bind -r -T copy-mode C-j send-keys -X page-down

# Modo Cópia
bind y copy-mode
bind -T copy-mode-vi 'v' send-keys -X begin-selection
bind -T copy-mode-vi 'y' send-keys -X copy-selection

bind [ paste-buffer

bind o select-window -t terminal \; send-keys "!!" enter C-l enter

bind-key -r i run-shell "tmux neww -n cheat ~/.dotfiles/cheat/cheat.sh"

# -- Visual --------------------------------------------------------------------

base00=default   # - Black, Default background color
base01='#3b4252' # - Black, lighter, pane number
base02='#434c5e' # - Black, lighter, pane border
base03='#abb2bf' # - Black, greyish, window title
base04='#d8dee9' # - White
base05='#e5e9f0' # - White, lighter
base06='#eceff4' # - White, lighter
base07='#56b6c2' # - Light Green, status date
base08='#88c0d0' # - Light Blue, clock, active pane number
base09='#8be9fd' # - Sky Blue, status battery
base0A='#5e81ac' # - Dark Blue
base0B='#ff5555' # - Red, status prefix highlight
base0C='#f1fa8c' # - Orange, tmux message
base0D='#ffb86c' # - yellow, active window, status zoom
base0E='#50fa7b' # - Green, status prefix off
base0F='#c678dd' # - Purple, active border, session

# Suporte a cores
set-option -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color*:Tc"

# Relógio
set-window-option -g clock-mode-colour $base08

# Bordas dos painéis
set-window-option -g pane-border-style fg=$base02
set-window-option -g pane-active-border-style fg=$base09

# Números dos painéis
set-option -g display-panes-active-colour $base08
set-option -g display-panes-colour $base01

# Título da janela ativa
set-window-option -g window-status-current-style fg=$base0D,bg=$base00
set-window-option -g window-status-current-format " #[bold]#W"

# -- Barra de estado ----------------------------------------------------------

# Estilo geral
set -g status-interval 60
set -g status-left-length 30
set -g status-right-length 150
set -g status-style fg=$base03,bg=$base00

# Mensagem de texto
set-option -g message-style bg=$base00,fg=$base0C

# Painel esquerdo
tm_session_name="#[default,bg=$base00,fg=$base0F] 🚀 #S "
set -g status-left "$tm_session_name"

# Lista de janelas
set-window-option -g window-status-style fg=$base03,bg=$base00

# Estilo da lista de janelas
set-window-option -g window-status-style fg=$base03,bg=$base00
set-window-option -g window-status-format " #I #W"

# Painel direito
tm_prefix=" #[default,bg=$base00,fg=$base04] #{?client_prefix,,}"
tm_pane="#[default,bg=$base00, fg=$base0F]  #P"
tm_upTime="#[default,fg=$base09,bg=$base00]  #($HOME/.config/tmux/scripts/uptime)"
tm_zoom="#[default,bg=$base00,fg=$base0D] #{?window_zoomed_flag,,#[bg=$base00,fg=$base0E]}"
tm_copy="#[default,bg=$base00,fg=$base0D] #{?pane_in_mode, ,#[bg=$base00,fg=$base03] }"

set -g status-right "$tm_prefix $tm_pane $tm_upTime $tm_zoom $tm_copy"
